---
title: 理解BFC
description: <!-- more -->
translate_title: understanding-bfc
date: 2019-01-08 18:07:29
updated: 2019-01-08 18:07:29
tags:
  - BFC
  - Block Formatting Context
categories:
  - CSS
---

## 定义
** 块格式化上下文（Block Formatting Context，BFC） **是Web页面的可视化CSS渲染的一部分，是布局过程中生成块级盒子的区域，也是浮动元素与其他元素的交互限定区域。

A ** block formatting context ** is a part of a visual CSS rendering of a Web page. It is the region in which the layout of block boxes occurs and in which floats interact with other elements.

## 创建块格式化上下文方式

- 根元素或包含根元素的元素
- 浮动元素（元素的 `float` 不是 `none）
- 绝对定位元素（元素的 `position` 为 `absolute` 或 `fixed`）
- 行内块元素（元素的 `display` 为 `inline-block`）
- 表格单元格（元素的 `display`为 `table-cell`，HTML表格单元格默认为该值）
- 表格标题（元素的 `display` 为 `table-caption`，HTML表格标题默认为该值）
- 匿名表格单元格元素（元素的 `display`为 `table`、`table-row`、 `table-row-group`、`table-header-group`、`table-footer-group`（分别是HTML `table`、`row`、`tbody`、`thead`、`tfoot`的默认属性）或 `inline-table`）
- `overflow` 值不为 `visible` 的块元素
- `display` 值为 `flow-root` 的元素
- `contain` 值为 `layout`、`content`或 `strict` 的元素
- 弹性元素（`display`为 `flex` 或 `inline-flex`元素的直接子元素）
- 网格元素（`display`为 `grid` 或 `inline-grid` 元素的直接子元素）
- 多列容器（元素的 `column-count` 或 `column-width` 不为 `auto`，包括 `column-count` 为 `1`）
- `column-span` 为 `all` 的元素始终会创建一个新的BFC，即使该元素没有包裹在一个多列容器中（标准变更，Chrome bug）

## 实现

### html（根元素或包含根元素的元素）
``` html
<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><style>
  *{margin:0; padding:0;}
  html{background: #f9fae2;}
  body{background: #cad9f2;}
  .root-bfc{
    width: 100px;
    height: 100px;
    margin: 50px;
    background: #ff8d8d;
  }
</style></head><body>
  <div class="root-bfc"></div>
</body></html> 
```

![018](/images/css/018.png)

`html`根元素不因为内部元素的`margin`外溢，而`body`元素会外溢

### float!=none（浮动元素）
``` html
<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><style>
  *{margin:0; padding:0;}
  html{background: #f9fae2;}
  body{background: #cad9f2;}
  .float-wrap{
    overflow: hidden;
  }
  .float-left{
    width: 100px;
    height: 100px;
    margin: 50px;
    background: #ff8d8d;
    float: left;
  }
  .float-right{
    width: 100px;
    height: 100px;
    margin: 50px;
    background: #ff8d8d;
    float: right;
  }
</style></head><body>
  <div class="float-wrap">
    <div class="float-left"></div>
    <div class="float-right"></div>
  </div>
</body></html> 
```
![019](/images/css/019.png)

添加float之后会产生浮动脱离文档流，这时根据需要在外层清除浮动；如果在body元素清除浮动，`overflow`以外的方法都可以使用

### position=absolute、fixed（绝对定位元素）
``` html

```

### display=inline-block（行内快元素）
``` html

```

### display=table-cell（表格单元格）
``` html

```

### display=caption（表格标题）
``` html

```

### display=some value（匿名表格单元格元素）
``` html

```

### overflow!=visible
``` html

```

### display=flow-root
``` html

```

### contain=layout、content、strict
``` html

```

### display=flex、inline-flex（弹性元素）
``` html

```

### display=grid、inline-grid（网格元素）
``` html

```

### column-count、column-width!=auto（多列容器）
``` html

```

### column-span=all
``` html

```

## 总结

# 参考

https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Block_formatting_context
https://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Block_formatting_context

https://www.w3.org/TR/CSS21/visuren.html#block-formatting

https://drafts.csswg.org/css-display/#block-formatting-context