---
title: 防盗链
description: <!-- more -->
translate_title: anti-theft-chain
date: 2019-04-08 18:48:13
updated: 2019-04-08 18:48:13
tags:
  - 盗链
categories:
  - HTTP
---

要了解什么是防盗链，那就得先说说什么是盗链。 
**盗链：**
盗链简单地可以理解成别人偷偷盗用了访问自己资源的链接。盗链比较常见的就是一些小网站盗用大的网站的资源（图片、视频、音乐等），将这些资源的地址直接放在自己的页面上，使得自己的用户可以自己通过自己的网站访问到并不在自己服务器上的内容。这样既可以向用户提供此内容，又可以将访问服务器的负担转移到别人的服务器上。

**防盗链：** 
简而言之，防盗链就是防止别人的盗链行为。让盗用自己资源的请求失效，从而减轻自己服务器的压力。

**防盗链如何实现？**
防盗链的实现可以通过设置HTTP Header中的Referer实现。当浏览器向服务器发送请求的时候，请求头中包含了Referer用于告诉服务器这个请求是来自哪里的，服务器可以借助这个字段进行防盗处理。后台可以获取到请求中的referer，如果请求来源不是本站则进行阻止或返回其他页面。 
如果Http头不包含referer，也就是通过浏览器地址栏直接访问该资源URL，服务器就返回页面。


或者使用`nginx`的`allow`、`deny`
[nginx访问控制allow、deny（ngx_http_access_module）](http://www.ttlsa.com/linux/nginx-modules-ngx_http_access_module/)

[https://www.cnblogs.com/wangyongsong/p/8204698.html](https://www.cnblogs.com/wangyongsong/p/8204698.html)

**如何突破防盗链**
1. referer为空
2. 代码内请求伪造referer
3. 利用iframe伪造请求referer
4. meta标签控制referer

# 参考
[防盗链——防止其他页面通过url直接访问本站资源](https://blog.csdn.net/DUDUfine/article/details/78627066)
[防盗链](https://www.cnblogs.com/saysmy/p/8647808.html)
