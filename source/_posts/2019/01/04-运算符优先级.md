---
title: 运算符优先级
description: <!-- more -->
translate_title: operator-priority
date: 2019-01-04 23:38:05
updated: 2019-01-04 23:38:05
tags:
  - 运算符
  - 优先级
categories:
  - JavaScript
---


> 首先是从一道 [面试题](https://zhuanlan.zhihu.com/p/27131429) 引发的思考 

```js
var a = {n: 1}
var b = a;
a.x = a = {n: 2}

console.log(a.x); // undefined
console.log(b.x); // {n: 2}
```

> 各种解释 [MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Operator_Precedence) [知乎](https://www.zhihu.com/question/52116922)

> 试着去读如下代码

`a>b?a--:--a+b>b+c?a==b<c||a==c:(a+b)*a`

c=3

| 执行前a | 执行前b | 执行结果 | 执行后a | 执行后b |
| ---- | ---- | ---- | ---- | ---- |
| 2    | 6    | 7    | 1    | 6    |
| 6    | 2    | 6    | 5    | 2    |
| 0    | 6    | -5   | -1   | 6    |

优先级大小依次降低：()、--、*、+、<、==、||、? :

> 运算符AST分析 [分析地址1](http://nhiro.org/learn_language/AST-Visualization-on-browser.html) [分析地址2](http://esprima.org/demo/parse.html#)

分析这段代码`a || b && c || d`

<svg height="430" version="1.1" width="1625" xmlns="http://www.w3.org/2000/svg" style="overflow: hidden; position: relative;margin-left: -415px;"><desc style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Created with Raphaël 2.1.0</desc><defs style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></defs><rect x="736.5" y="20" width="150" height="50" r="10" rx="10" ry="10" fill="#33aaaa" stroke="#ffffff" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="811.5" y="32" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#ffffff" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 14px; line-height: normal; font-family: Arial, Helvetica, sans-serif;" font-size="14px" font-family="Arial, Helvetica, sans-serif"><tspan dy="5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Program</tspan></text><rect x="736.5" y="90" width="150" height="50" r="10" rx="10" ry="10" fill="#33aaaa" stroke="#ffffff" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><path fill="none" stroke="#cccccc" d="M811.5,70L811.5,90Z" stroke-width="1" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><text x="811.5" y="102" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#ffffff" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 14px; line-height: normal; font-family: Arial, Helvetica, sans-serif;" font-size="14px" font-family="Arial, Helvetica, sans-serif"><tspan dy="5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">ExpressionStatement</tspan></text><rect x="736.5" y="160" width="150" height="50" r="10" rx="10" ry="10" fill="#33aaaa" stroke="#ffffff" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><path fill="none" stroke="#cccccc" d="M811.5,140L811.5,160Z" stroke-width="1" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><text x="811.5" y="172" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#ffffff" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 14px; line-height: normal; font-family: Arial, Helvetica, sans-serif;" font-size="14px" font-family="Arial, Helvetica, sans-serif"><tspan dy="5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">LogicalExpression</tspan></text><text x="811.5" y="184" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#ffffff" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Arial, Helvetica, sans-serif;" font-size="12px" font-family="Arial, Helvetica, sans-serif"><tspan dy="4" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">operator: ||</tspan><tspan dy="14.399999999999999" x="811.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></tspan></text><rect x="651.5" y="230" width="150" height="50" r="10" rx="10" ry="10" fill="#33aaaa" stroke="#ffffff" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><path fill="none" stroke="#cccccc" d="M811.5,210L726.5,230Z" stroke-width="1" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><text x="726.5" y="242" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#ffffff" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 14px; line-height: normal; font-family: Arial, Helvetica, sans-serif;" font-size="14px" font-family="Arial, Helvetica, sans-serif"><tspan dy="5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">LogicalExpression</tspan></text><text x="726.5" y="254" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#ffffff" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Arial, Helvetica, sans-serif;" font-size="12px" font-family="Arial, Helvetica, sans-serif"><tspan dy="4" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">operator: ||</tspan><tspan dy="14.399999999999999" x="726.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></tspan></text><rect x="566.5" y="300" width="150" height="50" r="10" rx="10" ry="10" fill="#33aaaa" stroke="#ffffff" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><path fill="none" stroke="#cccccc" d="M726.5,280L641.5,300Z" stroke-width="1" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><text x="641.5" y="312" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#ffffff" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 14px; line-height: normal; font-family: Arial, Helvetica, sans-serif;" font-size="14px" font-family="Arial, Helvetica, sans-serif"><tspan dy="5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Identifier</tspan></text><text x="641.5" y="324" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#ffffff" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Arial, Helvetica, sans-serif;" font-size="12px" font-family="Arial, Helvetica, sans-serif"><tspan dy="4" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">name: a</tspan><tspan dy="14.399999999999999" x="641.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></tspan></text><rect x="736.5" y="300" width="150" height="50" r="10" rx="10" ry="10" fill="#33aaaa" stroke="#ffffff" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><path fill="none" stroke="#cccccc" d="M726.5,280L811.5,300Z" stroke-width="1" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><text x="811.5" y="312" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#ffffff" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 14px; line-height: normal; font-family: Arial, Helvetica, sans-serif;" font-size="14px" font-family="Arial, Helvetica, sans-serif"><tspan dy="5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">LogicalExpression</tspan></text><text x="811.5" y="324" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#ffffff" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Arial, Helvetica, sans-serif;" font-size="12px" font-family="Arial, Helvetica, sans-serif"><tspan dy="4" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">operator: &amp;&amp;</tspan><tspan dy="14.399999999999999" x="811.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></tspan></text><rect x="651.5" y="370" width="150" height="50" r="10" rx="10" ry="10" fill="#33aaaa" stroke="#ffffff" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><path fill="none" stroke="#cccccc" d="M811.5,350L726.5,370Z" stroke-width="1" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><text x="726.5" y="382" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#ffffff" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 14px; line-height: normal; font-family: Arial, Helvetica, sans-serif;" font-size="14px" font-family="Arial, Helvetica, sans-serif"><tspan dy="5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Identifier</tspan></text><text x="726.5" y="394" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#ffffff" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Arial, Helvetica, sans-serif;" font-size="12px" font-family="Arial, Helvetica, sans-serif"><tspan dy="4" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">name: b</tspan><tspan dy="14.399999999999999" x="726.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></tspan></text><rect x="821.5" y="370" width="150" height="50" r="10" rx="10" ry="10" fill="#33aaaa" stroke="#ffffff" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><path fill="none" stroke="#cccccc" d="M811.5,350L896.5,370Z" stroke-width="1" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><text x="896.5" y="382" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#ffffff" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 14px; line-height: normal; font-family: Arial, Helvetica, sans-serif;" font-size="14px" font-family="Arial, Helvetica, sans-serif"><tspan dy="5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Identifier</tspan></text><text x="896.5" y="394" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#ffffff" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Arial, Helvetica, sans-serif;" font-size="12px" font-family="Arial, Helvetica, sans-serif"><tspan dy="4" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">name: c</tspan><tspan dy="14.399999999999999" x="896.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></tspan></text><rect x="991.5" y="370" width="150" height="50" r="10" rx="10" ry="10" fill="#33aaaa" stroke="#ffffff" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><path fill="none" stroke="#cccccc" d="M811.5,210L1066.5,370Z" stroke-width="1" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><text x="1066.5" y="382" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#ffffff" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 14px; line-height: normal; font-family: Arial, Helvetica, sans-serif;" font-size="14px" font-family="Arial, Helvetica, sans-serif"><tspan dy="5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Identifier</tspan></text><text x="1066.5" y="394" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#ffffff" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Arial, Helvetica, sans-serif;" font-size="12px" font-family="Arial, Helvetica, sans-serif"><tspan dy="4" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">name: d</tspan><tspan dy="14.399999999999999" x="1066.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></tspan></text></svg>



|| 与 && 的短路求值语义，如果左操作数已经足以求出结果则不会对右操作数求值。

> 常用操作符优先级

逗号、赋值、条件、逻辑或、逻辑与、相等、比较、算术、前置递减、后置递减、成员访问、小括号
